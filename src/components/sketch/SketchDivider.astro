---
interface Props {
  variant?: 'wavy' | 'zigzag' | 'straight' | 'dots';
  class?: string;
}

const { variant = 'wavy', class: className } = Astro.props;

const paths = {
  wavy: 'M0,10 Q25,0 50,10 T100,10 T150,10 T200,10 T250,10 T300,10 T350,10 T400,10 T450,10 T500,10',
  zigzag: 'M0,15 L25,5 L50,15 L75,5 L100,15 L125,5 L150,15 L175,5 L200,15 L225,5 L250,15 L275,5 L300,15 L325,5 L350,15 L375,5 L400,15 L425,5 L450,15 L475,5 L500,15',
  straight: 'M0,10 L500,10',
  dots: 'M10,10 L490,10',
};
---

<div class:list={['sketch-divider', `sketch-divider--${variant}`, className]} role="separator" aria-hidden="true">
  <svg width="100%" height="24" viewBox="0 0 500 24" preserveAspectRatio="none">
    {variant === 'dots' ? (
      <>
        {Array.from({ length: 20 }, (_, i) => (
          <circle
            cx={20 + i * 25}
            cy="12"
            r="3"
            fill="var(--color-stroke-muted)"
            opacity={0.5 + (i % 3) * 0.2}
          />
        ))}
      </>
    ) : (
      <path
        d={paths[variant]}
        fill="none"
        stroke="var(--color-stroke-muted)"
        stroke-width="2.5"
        stroke-linecap="round"
        vector-effect="non-scaling-stroke"
        filter="url(#sketch-filter)"
      />
    )}
  </svg>
</div>

<style>
  .sketch-divider {
    margin-block: var(--space-xl);
    opacity: 0.8;
    position: relative;
  }

  .sketch-divider::before,
  .sketch-divider::after {
    content: '';
    position: absolute;
    top: 50%;
    width: 100px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--color-stroke-muted), transparent);
    opacity: 0.3;
  }

  .sketch-divider::before {
    left: 0;
    transform: translateX(-100%);
  }

  .sketch-divider::after {
    right: 0;
    transform: translateX(100%);
  }

  @media (max-width: 768px) {
    .sketch-divider {
      margin-block: var(--space-lg);
    }
  }
</style>
